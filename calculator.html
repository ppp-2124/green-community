<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>碳排放计算器 - 低碳生活平台</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* 计算器特定样式 */
        .calculator-container {
            background-color: #fff;
            border-radius: 10px;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
            padding: 20px;
            margin-bottom: 30px;
        }
        
        .calculator-tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 1px solid #e0e0e0;
        }
        
        .calculator-tab {
            padding: 10px 20px;
            cursor: pointer;
            font-weight: 500;
            color: #555;
            position: relative;
            transition: color 0.3s;
        }
        
        .calculator-tab.active {
            color: #4CAF50;
        }
        
        .calculator-tab.active::after {
            content: '';
            position: absolute;
            bottom: -1px;
            left: 0;
            width: 100%;
            height: 3px;
            background-color: #4CAF50;
        }
        
        .calculator-content {
            padding: 20px 0;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
        }
        
        .slider {
            width: 100%;
            height: 8px;
            border-radius: 4px;
            background: #ddd;
            outline: none;
            -webkit-appearance: none;
            margin: 10px 0;
            transition: background 0.3s;
        }
        
        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 22px;
            height: 22px;
            border-radius: 50%;
            background: #4CAF50;
            cursor: pointer;
            border: 2px solid white;
            box-shadow: 0 0 5px rgba(0,0,0,0.2);
            transition: all 0.3s;
        }
        
        .slider::-webkit-slider-thumb:hover {
            background: #3b9a3f;
            transform: scale(1.1);
        }
        
        .slider:focus {
            background: #e5e5e5;
        }
        
        .slider-value {
            font-weight: 600;
            color: #4CAF50;
            min-width: 80px;
            text-align: right;
        }
        
        .checkbox-group, .radio-group {
            margin: 8px 0;
        }
        
        .form-check {
            margin: 10px 0;
            display: flex;
            align-items: center;
        }
        
        .form-check input[type="checkbox"],
        .form-check input[type="radio"] {
            margin-right: 10px;
            cursor: pointer;
            width: 18px;
            height: 18px;
            -webkit-appearance: none;
            border: 2px solid #4CAF50;
            border-radius: 3px;
            outline: none;
            transition: all 0.3s;
            position: relative;
        }
        
        .form-check input[type="radio"] {
            border-radius: 50%;
        }
        
        .form-check input[type="checkbox"]:checked,
        .form-check input[type="radio"]:checked {
            background-color: #4CAF50;
        }
        
        .form-check input[type="checkbox"]:checked::before {
            content: '✓';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-size: 12px;
        }
        
        .form-check input[type="radio"]:checked::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: white;
        }
        
        .form-check label {
            cursor: pointer;
            font-weight: 400;
            color: #333;
            transition: color 0.3s;
        }
        
        .form-check:hover label {
            color: #4CAF50;
        }
        
        .action-buttons {
            display: flex;
            gap: 15px;
            margin-top: 30px;
        }
        
        .primary-btn, .secondary-btn {
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            transition: all 0.3s;
        }
        
        .primary-btn {
            background-color: #4CAF50;
            color: white;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .secondary-btn {
            background-color: #f5f5f5;
            color: #333;
        }
        
        .results-section {
            margin-top: 40px;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.5s ease-out;
            display: none;
        }
        
        .results-section.visible {
            opacity: 1;
            transform: translateY(0);
            display: block;
        }
        
        .result-summary {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 30px;
            margin-bottom: 30px;
        }
        
        .total-emission {
            background-color: #f5f7fa;
            border-radius: 12px;
            padding: 25px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            box-shadow: 0 3px 10px rgba(0,0,0,0.05);
            transition: transform 0.3s;
        }
        
        .total-emission:hover {
            transform: translateY(-5px);
        }
        
        .emission-value {
            font-size: 2.5rem;
            font-weight: 700;
            color: #4CAF50;
            margin: 15px 0;
            display: flex;
            align-items: baseline;
        }
        
        .emission-value .unit {
            font-size: 1rem;
            margin-left: 5px;
            color: #666;
        }
        
        .emission-comparison {
            font-size: 0.9rem;
            color: #666;
        }
        
        #percentage-value {
            font-weight: 700;
            color: #4CAF50;
            margin-left: 5px;
        }
        
        .emission-breakdown {
            background-color: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.05);
        }
        
        .chart-container {
            height: 250px;
            margin-top: 20px;
        }
        
        .comparative-metrics {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .metric-card {
            background-color: white;
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 3px 10px rgba(0,0,0,0.05);
            transition: all 0.3s;
        }
        
        .metric-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .metric-card i {
            font-size: 2rem;
            color: #4CAF50;
            margin-bottom: 15px;
        }
        
        .metric-value {
            font-size: 1.8rem;
            font-weight: 700;
            color: #333;
            margin-bottom: 10px;
            display: flex;
            align-items: baseline;
            justify-content: center;
        }
        
        .metric-value .unit {
            font-size: 1rem;
            margin-left: 5px;
            color: #666;
        }
        
        .metric-card p {
            font-size: 0.9rem;
            color: #666;
        }
        
        .reduction-suggestions {
            background-color: #f5f7fa;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.05);
        }
        
        #suggestions-list {
            margin-top: 15px;
            padding-left: 20px;
        }
        
        #suggestions-list li {
            margin-bottom: 12px;
            line-height: 1.5;
            position: relative;
            padding-left: 10px;
        }
        
        #suggestions-list li::before {
            content: '•';
            color: #4CAF50;
            font-weight: bold;
            position: absolute;
            left: -10px;
        }
        
        /* 响应式调整 */
        @media (max-width: 768px) {
            .result-summary {
                grid-template-columns: 1fr;
            }
            
            .comparative-metrics {
                grid-template-columns: 1fr;
            }
            
            .category-tabs {
                flex-wrap: wrap;
            }
            
            .category-tabs .tab {
                width: 50%;
                text-align: center;
                padding: 10px;
            }
            
            .action-buttons {
                flex-direction: column;
            }
            
            .primary-btn, .secondary-btn {
                width: 100%;
                justify-content: center;
            }
        }

        /* 强调计算按钮 */
        .calculator-action-hint {
            text-align: center;
            margin: 20px 0;
            color: #666;
            font-style: italic;
        }
        
        .calculator-buttons {
            background-color: #f5f5f5;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            border: 1px dashed #ddd;
        }
        
        .btn.btn-primary {
            position: relative;
            overflow: hidden;
        }
        
        .btn.btn-primary:after {
            content: "";
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: rgba(255, 255, 255, 0.2);
            transform: rotate(45deg);
            transition: all 0.5s;
            opacity: 0;
        }
        
        .btn.btn-primary:hover:after {
            opacity: 1;
            left: 100%;
        }
        
        /* 分步计算进度指示器 */
        .calculator-progress {
            display: flex;
            justify-content: space-between;
            margin-bottom: 25px;
            position: relative;
            padding: 0 10px;
        }
        
        .calculator-progress:after {
            content: '';
            position: absolute;
            top: 15px;
            left: 0;
            right: 0;
            height: 2px;
            background-color: #e0e0e0;
            z-index: 1;
        }
        
        .progress-step {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background-color: #e0e0e0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            position: relative;
            z-index: 2;
        }
        
        .progress-step.active {
            background-color: #4CAF50;
            color: white;
        }
        
        .progress-label {
            position: absolute;
            top: 35px;
            left: 50%;
            transform: translateX(-50%);
            white-space: nowrap;
            font-size: 0.8rem;
            color: #666;
        }
        
        .progress-step.active .progress-label {
            color: #4CAF50;
            font-weight: 500;
        }
        
        /* 新增布局样式 */
        .content-container {
            display: flex;
            flex-direction: column;
            width: 100%;
        }
        
        .calculator-main {
            flex: 1;
            padding: 20px;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            margin-bottom: 30px;
        }
        
        .about-section-bottom {
            background-color: #f8f9fa;
            padding: 30px;
            border-radius: 8px;
            margin-top: 20px;
            border-top: 3px solid #4CAF50;
        }
        
        .about-section-bottom .copyright-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 20px;
            border-bottom: 1px solid #e0e0e0;
        }
        
        .about-section-bottom .copyright-info p {
            margin: 0;
            color: #555;
        }
        
        .about-section-bottom .links {
            display: flex;
            gap: 20px;
        }
        
        .about-section-bottom .links a {
            color: #4CAF50;
            text-decoration: none;
            transition: color 0.3s;
        }
        
        .about-section-bottom .links a:hover {
            color: #2e7d32;
        }
        
        .about-content {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 30px;
        }
        
        .about-content h3 {
            margin-top: 0;
            margin-bottom: 15px;
            color: #4CAF50;
            font-size: 1.2rem;
        }
        
        .about-content p {
            color: #555;
            margin-bottom: 10px;
            line-height: 1.6;
        }
        
        .about-content .social-icons {
            display: flex;
            gap: 15px;
            margin-top: 10px;
        }
        
        .about-content .social-icons a {
            color: #4CAF50;
            font-size: 1.5rem;
            transition: color 0.3s;
        }
        
        .about-content .social-icons a:hover {
            color: #2e7d32;
        }
        
        /* 顶部版权信息样式 */
        .top-copyright {
            background-color: #f8f9fa;
            padding: 10px 15px;
            margin-bottom: 20px;
            border-radius: 4px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.85rem;
            color: #666;
        }
        
        .top-copyright .top-links {
            display: flex;
            gap: 15px;
        }
        
        .top-copyright .top-links a {
            color: #4CAF50;
            text-decoration: none;
        }
        
        /* 碳排放步骤样式 */
        .calculator-steps {
            display: flex;
            justify-content: space-between;
            margin: 30px 0;
            position: relative;
        }
        
        .calculator-steps::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 2px;
            background-color: #e0e0e0;
            z-index: 1;
        }
        
        .step {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            z-index: 2;
        }
        
        .step-number {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background-color: #f0f0f0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-bottom: 8px;
            border: 2px solid #e0e0e0;
            background-color: white;
        }
        
        .step.active .step-number {
            background-color: #4CAF50;
            color: white;
            border-color: #4CAF50;
        }
        
        .step-label {
            font-size: 0.85rem;
            color: #666;
        }
        
        .step.active .step-label {
            color: #4CAF50;
            font-weight: 500;
        }
        
        /* 分类标签样式 */
        .category-tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 1px solid #e0e0e0;
        }
        
        .category-tabs .tab {
            padding: 12px 20px;
            cursor: pointer;
            color: #666;
            font-weight: 500;
            position: relative;
            transition: color 0.3s;
        }
        
        .category-tabs .tab.active {
            color: #4CAF50;
        }
        
        .category-tabs .tab.active::after {
            content: '';
            position: absolute;
            bottom: -1px;
            left: 0;
            right: 0;
            height: 3px;
            background-color: #4CAF50;
        }
        
        /* 类别内容样式 */
        .calculator-container {
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            padding: 25px;
            margin-bottom: 30px;
        }
        
        .category-content {
            display: none;
            padding: 20px 0;
        }
        
        .category-content.active {
            display: block;
        }
        
        /* 按钮样式 */
        .action-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px dashed #e0e0e0;
        }
        
        .primary-btn, .secondary-btn {
            padding: 12px 25px;
            border-radius: 4px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 16px;
            transition: all 0.3s ease;
        }
        
        .primary-btn {
            background-color: #4CAF50;
            color: white;
            border: none;
        }
        
        .secondary-btn {
            background-color: #f5f5f5;
            color: #333;
            border: 1px solid #ddd;
        }
        
        .primary-btn:hover {
            background-color: #3b9a3f;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        .secondary-btn:hover {
            background-color: #e5e5e5;
            transform: translateY(-2px);
        }
        
        /* About item样式 */
        .about-item {
            padding: 15px;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        
        @media (max-width: 768px) {
            .about-content {
                grid-template-columns: 1fr;
            }
            
            .about-section-bottom .copyright-info {
                flex-direction: column;
                text-align: center;
            }
            
            .about-section-bottom .links {
                margin-top: 15px;
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .top-copyright {
                flex-direction: column;
                gap: 10px;
                text-align: center;
            }
            
            .top-copyright .top-links {
                justify-content: center;
            }
            
            .calculator-steps {
                flex-wrap: wrap;
                gap: 15px;
            }
            
            .calculator-steps::after {
                display: none;
            }
            
            .step {
                width: calc(50% - 15px);
            }
        }

        /* 历史记录区域样式 */
        .history-section {
            margin-top: 40px;
            padding: 25px;
            background-color: #f5f7fa;
            border-radius: 12px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.05);
        }

        .history-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .history-title {
            font-size: 1.4rem;
            color: #333;
            margin: 0;
        }

        .history-records {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .history-record {
            background-color: white;
            border-radius: 8px;
            padding: 15px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s;
        }

        .history-record:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .history-record-date {
            font-weight: 500;
            color: #666;
        }

        .history-record-emission {
            font-weight: 700;
            color: #4CAF50;
        }

        .history-record-source {
            color: #555;
        }

        .history-empty {
            text-align: center;
            padding: 30px;
            color: #999;
            font-style: italic;
        }

        .history-action {
            margin-left: 15px;
            cursor: pointer;
            color: #2196F3;
            font-weight: 500;
            transition: color 0.3s;
        }

        .history-action:hover {
            color: #0b7dda;
            text-decoration: underline;
        }

        .history-delete {
            color: #f44336;
        }

        .history-delete:hover {
            color: #d32f2f;
        }
    </style>
</head>
<body>
    <!-- 导航栏 -->
    <nav class="navbar">
        <div class="container navbar-container">
            <div class="navbar-logo">
                <a href="index.html">
                    <i class="fas fa-leaf"></i> 绿色社区
                </a>
            </div>

            <!-- 搜索框 -->
            <div class="search-bar">
                <input type="text" class="search-input" placeholder="搜索环保知识...">
                <button class="search-button"><i class="fas fa-search"></i></button>
            </div>

            <ul class="navbar-menu">
                <li><a href="index.html">首页</a></li>
                <li><a href="record.html">碳行为记录</a></li>
                <li><a href="exchange.html">积分兑换</a></li>
                <li><a href="ranking.html">排行榜</a></li>
                <li><a href="login.html">登录/注册</a></li>
                <li><a href="profile.html"><i class="fas fa-user-circle"></i> 个人中心</a></li>
            </ul>
        </div>
    </nav>
    
    <!-- 页面主体 -->
    <div class="page-wrapper">
        <!-- 侧边栏 -->
        <aside class="sidebar">
            <ul class="sidebar-menu">
                <li class="sidebar-menu-item">
                    <a href="index.html" class="sidebar-menu-link">
                        <i class="fas fa-home"></i> 首页
                    </a>
                </li>
                <li class="sidebar-menu-item">
                    <a href="dashboard.html" class="sidebar-menu-link">
                        <i class="fas fa-chart-line"></i> 数据看板
                    </a>
                </li>

                <div class="sidebar-divider"></div>
                <div class="sidebar-menu-category">环保行动</div>

                <li class="sidebar-menu-item">
                    <a href="record.html" class="sidebar-menu-link">
                        <i class="fas fa-camera"></i> 碳行为记录
                    </a>
                </li>
                <li class="sidebar-menu-item">
                    <a href="activities.html" class="sidebar-menu-link">
                        <i class="fas fa-calendar-alt"></i> 环保活动
                    </a>
                </li>

                <div class="sidebar-divider"></div>
                <div class="sidebar-menu-category">平台服务</div>

                <li class="sidebar-menu-item">
                    <a href="exchange.html" class="sidebar-menu-link">
                        <i class="fas fa-gift"></i> 积分兑换
                    </a>
                </li>
                <li class="sidebar-menu-item">
                    <a href="ranking.html" class="sidebar-menu-link">
                        <i class="fas fa-trophy"></i> 排行榜
                    </a>
                </li>
                <li class="sidebar-menu-item">
                    <a href="community.html" class="sidebar-menu-link">
                        <i class="fas fa-users"></i> 社区互动
                    </a>
                </li>

                <div class="sidebar-divider"></div>
                <div class="sidebar-menu-category">环保知识</div>

                <li class="sidebar-menu-item">
                    <a href="knowledge.html" class="sidebar-menu-link">
                        <i class="fas fa-book"></i> 知识库
                    </a>
                </li>
                <li class="sidebar-menu-item">
                    <a href="calculator.html" class="sidebar-menu-link active">
                        <i class="fas fa-calculator"></i> 碳排放计算器
                    </a>
                </li>
            </ul>
        </aside>

        <!-- 主要内容区 -->
        <div class="main-content">
            <!-- 面包屑导航 -->
            <div class="breadcrumb">
                <a href="index.html">首页</a> / <span>碳排放计算器</span>
            </div>
            
            <!-- 主标题 -->
            <h1 class="page-title">碳排放计算器</h1>
            <p class="page-description">通过这个工具，您可以估算自己日常生活中的碳排放量，并获取减少碳足迹的个性化建议。</p>
            
            <!-- 计算进度指示器 -->
            <div class="calculator-steps">
                <div class="step active">
                    <div class="step-number">1</div>
                    <div class="step-label">输入数据</div>
                </div>
                <div class="step">
                    <div class="step-number">2</div>
                    <div class="step-label">计算排放</div>
                </div>
                <div class="step">
                    <div class="step-number">3</div>
                    <div class="step-label">查看结果</div>
                </div>
                <div class="step">
                    <div class="step-number">4</div>
                    <div class="step-label">减排建议</div>
                </div>
            </div>
            
            <!-- 分类标签 -->
            <div class="category-tabs">
                <div class="tab active" data-category="home-energy">家庭能源</div>
                <div class="tab" data-category="transportation">交通出行</div>
                <div class="tab" data-category="food">饮食习惯</div>
                <div class="tab" data-category="consumption">消费习惯</div>
            </div>
            
            <!-- 计算器内容区 -->
            <div class="calculator-container">
                <!-- 家庭能源标签内容 -->
                <div class="category-content active" id="home-energy">
                    <div class="form-group">
                        <label for="electricity-usage">每月用电量 (千瓦时)</label>
                        <div class="slider-container">
                            <input type="range" id="electricity-usage" min="0" max="1000" value="200" class="slider">
                            <span class="slider-value">200 kWh/月</span>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="gas-usage">每月天然气用量 (立方米)</label>
                        <div class="slider-container">
                            <input type="range" id="gas-usage" min="0" max="200" value="30" class="slider">
                            <span class="slider-value">30 m³/月</span>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="water-usage">每月用水量 (吨)</label>
                        <div class="slider-container">
                            <input type="range" id="water-usage" min="0" max="30" value="5" class="slider">
                            <span class="slider-value">5 m³/月</span>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>使用可再生能源?</label>
                        <div class="checkbox-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="renewable-energy"> 我在使用可再生能源
                            </label>
                        </div>
                        <div class="checkbox-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="energy-efficient"> 我的家电都是节能型
                            </label>
                        </div>
                    </div>
                </div>
                
                <!-- 交通出行标签内容 -->
                <div class="category-content" id="transportation">
                    <div class="form-group">
                        <label for="car-usage">每周驾车里程 (公里)</label>
                        <div class="slider-container">
                            <input type="range" id="car-usage" min="0" max="1000" value="100" class="slider">
                            <span class="slider-value">100 km/周</span>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="public-transport">每周公共交通使用频率 (次)</label>
                        <div class="slider-container">
                            <input type="range" id="public-transport" min="0" max="30" value="5" class="slider">
                            <span class="slider-value">5 次/周</span>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="flight">年度飞行里程 (公里)</label>
                        <div class="slider-container">
                            <input type="range" id="flight" min="0" max="50000" value="5000" class="slider">
                            <span class="slider-value">5000 km/年</span>
                        </div>
                    </div>
                    <div class="form-check">
                        <input type="checkbox" id="electric-vehicle">
                        <label for="electric-vehicle">我使用电动汽车</label>
                    </div>
                    <div class="form-check">
                        <input type="checkbox" id="carpooling">
                        <label for="carpooling">我经常拼车出行</label>
                    </div>
                </div>
                
                <!-- 饮食习惯标签内容 -->
                <div class="category-content" id="food">
                    <div class="form-group">
                        <label>肉类消费频率</label>
                        <div class="radio-group">
                            <div class="form-check">
                                <input type="radio" name="meat-consumption" id="meat-daily" value="daily">
                                <label for="meat-daily">每天</label>
                            </div>
                            <div class="form-check">
                                <input type="radio" name="meat-consumption" id="meat-weekly" value="weekly" checked>
                                <label for="meat-weekly">每周几次</label>
                            </div>
                            <div class="form-check">
                                <input type="radio" name="meat-consumption" id="meat-monthly" value="monthly">
                                <label for="meat-monthly">每月几次</label>
                            </div>
                            <div class="form-check">
                                <input type="radio" name="meat-consumption" id="meat-never" value="never">
                                <label for="meat-never">不吃肉</label>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="food-waste">每周食物浪费量 (公斤)</label>
                        <div class="slider-container">
                            <input type="range" id="food-waste" min="0" max="5" step="0.1" value="0.5" class="slider">
                            <span class="slider-value">0.5 kg/周</span>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="local-food">本地食品购买比例 (%)</label>
                        <div class="slider-container">
                            <input type="range" id="local-food" min="0" max="100" value="30" class="slider">
                            <span class="slider-value">30 %</span>
                        </div>
                    </div>
                    <div class="form-check">
                        <input type="checkbox" id="organic-food">
                        <label for="organic-food">我优先购买有机食品</label>
                    </div>
                </div>
                
                <!-- 消费习惯标签内容 -->
                <div class="category-content" id="consumption">
                    <div class="form-group">
                        <label for="new-clothes">每年购买新衣物数量</label>
                        <div class="slider-container">
                            <input type="range" id="new-clothes" min="0" max="50" value="10" class="slider">
                            <span class="slider-value">10 件/年</span>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="electronics">每年购买新电子产品数量</label>
                        <div class="slider-container">
                            <input type="range" id="electronics" min="0" max="10" value="1" class="slider">
                            <span class="slider-value">1 件/年</span>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>回收习惯</label>
                        <div class="radio-group">
                            <div class="form-check">
                                <input type="radio" name="recycling" id="recycling-always" value="always">
                                <label for="recycling-always">经常回收</label>
                            </div>
                            <div class="form-check">
                                <input type="radio" name="recycling" id="recycling-sometimes" value="sometimes" checked>
                                <label for="recycling-sometimes">有时回收</label>
                            </div>
                            <div class="form-check">
                                <input type="radio" name="recycling" id="recycling-never" value="never">
                                <label for="recycling-never">不回收</label>
                            </div>
                        </div>
                    </div>
                    <div class="form-check">
                        <input type="checkbox" id="second-hand">
                        <label for="second-hand">我经常购买二手物品</label>
                    </div>
                </div>
                
                <!-- 计算按钮区域 -->
                <div class="action-buttons">
                    <button type="button" id="calculate-btn" class="primary-btn">
                        <i class="fas fa-calculator"></i> 立即计算碳排放
                    </button>
                    <button type="reset" id="reset-btn" class="secondary-btn">
                        <i class="fas fa-redo"></i> 重置数据
                    </button>
                </div>
            </div>
            
            <!-- 结果展示区域 -->
            <div class="results-section" id="results-section">
                <h3>您的碳排放结果</h3>
                
                <div class="result-summary">
                    <div class="total-emission">
                        <h4>您的年度碳排放量</h4>
                        <div class="emission-value">
                            <span id="total-emission-value">0</span>
                            <span class="unit">吨CO₂</span>
                        </div>
                        <div class="emission-comparison">
                            <span>相当于中国平均水平的</span>
                            <span id="percentage-value">0%</span>
                        </div>
                    </div>
                    
                    <div class="emission-breakdown">
                        <h4>排放来源分析</h4>
                        <div class="chart-container">
                            <!-- 排放源占比表格将由JavaScript动态生成 -->
                        </div>
                    </div>
                </div>
                
                <div class="comparative-metrics">
                    <div class="metric-card">
                        <i class="fas fa-tree"></i>
                        <div class="metric-value">
                            <span id="trees-value">0</span>
                            <span class="unit">棵树</span>
                        </div>
                        <p>需要种植这么多树木才能抵消您的碳排放</p>
                    </div>
                    <div class="metric-card">
                        <i class="fas fa-car"></i>
                        <div class="metric-value">
                            <span id="driving-value">0</span>
                            <span class="unit">公里</span>
                        </div>
                        <p>相当于驾车行驶这么远的距离</p>
                    </div>
                    <div class="metric-card">
                        <i class="fas fa-lightbulb"></i>
                        <div class="metric-value">
                            <span id="energy-value">0</span>
                            <span class="unit">千瓦时</span>
                        </div>
                        <p>相当于家庭用电这么多度</p>
                    </div>
                </div>
                
                <div class="reduction-suggestions">
                    <h4>减少碳排放的建议</h4>
                    <ul id="suggestions-list">
                        <!-- 建议内容将由JavaScript动态生成 -->
                    </ul>
                </div>
                
                <div class="action-buttons">
                    <button type="button" id="share-btn" class="primary-btn">
                        <i class="fas fa-share-alt"></i> 分享结果
                    </button>
                    <button type="button" id="export-btn" class="secondary-btn">
                        <i class="fas fa-file-pdf"></i> 导出PDF
                    </button>
                    <button type="button" id="recalculate-btn" class="secondary-btn">
                        <i class="fas fa-calculator"></i> 重新计算
                    </button>
                </div>
            </div>

            <!-- 历史记录区域 -->
            <div class="history-section" id="history-section">
                <div class="history-header">
                    <h3 class="history-title">历史计算记录</h3>
                    <button id="clear-history-btn" class="btn btn-secondary">
                        <i class="fas fa-trash-alt"></i> 清空历史
                    </button>
                </div>
                <div class="history-records" id="history-records">
                    <!-- 历史记录将通过JavaScript动态添加 -->
                    <div class="history-empty" id="history-empty">
                        <i class="fas fa-history" style="font-size: 2rem; margin-bottom: 15px; display: block;"></i>
                        您还没有任何计算记录
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 页脚 -->
    <footer class="footer">
        <div class="container footer-content">
            <div class="footer-copyright">
                <p>&copy; 2025 社区低碳积分平台 - 让环保更有趣</p>
            </div>
            <ul class="footer-links">
                <li><a href="#">关于我们</a></li>
                <li><a href="#">使用条款</a></li>
                <li><a href="#">隐私政策</a></li>
                <li><a href="#">联系我们</a></li>
            </ul>
        </div>
    </footer>

    <!-- 将外部JS引用注释掉，因为计算逻辑已经在页面中实现 -->
    <!-- 引入计算器功能的JavaScript文件 -->
    <!-- <script src="js/calculator.js"></script> -->
    <!-- 添加Chart.js库用于图表展示 -->
    <!-- <script src="https://cdn.jsdelivr.net/npm/chart.js"></script> -->
    <script>
        // 滑块值实时更新
        document.querySelectorAll('.slider').forEach(slider => {
            const valueDisplay = slider.nextElementSibling;
            slider.addEventListener('input', function() {
                let unit = '';
                switch(this.id) {
                    case 'electricity-usage':
                        unit = ' kWh/月';
                        break;
                    case 'gas-usage':
                    case 'water-usage':
                        unit = ' m³/月';
                        break;
                    case 'car-usage':
                        unit = ' km/周';
                        break;
                    case 'public-transport':
                        unit = ' 次/周';
                        break;
                    case 'flight':
                        unit = ' km/年';
                        break;
                    case 'food-waste':
                        unit = ' kg/周';
                        break;
                    case 'local-food':
                        unit = ' %';
                        break;
                    case 'new-clothes':
                        unit = ' 件/年';
                        break;
                    case 'electronics':
                        unit = ' 件/年';
                        break;
                    default:
                        unit = '';
                }
                valueDisplay.textContent = this.value + unit;
            });
        });
        
        // 标签切换
        const tabs = document.querySelectorAll('.tab');
        const categoryContents = document.querySelectorAll('.category-content');
        
        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                tabs.forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                
                const category = tab.getAttribute('data-category');
                categoryContents.forEach(content => {
                    content.classList.remove('active');
                    if (content.id === category) {
                        content.classList.add('active');
                    }
                });
            });
        });
        
        // 计算按钮点击事件 - 重构直接实现计算逻辑
        document.getElementById('calculate-btn').addEventListener('click', function() {
            // 获取输入值
            const electricity = parseInt(document.getElementById('electricity-usage').value);
            const gas = parseInt(document.getElementById('gas-usage').value);
            const car = parseInt(document.getElementById('car-usage').value);
            const flights = parseInt(document.getElementById('flight').value);
            const isElectricVehicle = document.getElementById('electric-vehicle').checked;
            const meatConsumption = document.querySelector('input[name="meat-consumption"]:checked').value;
            const localFood = parseInt(document.getElementById('local-food').value);
            const newClothes = parseInt(document.getElementById('new-clothes').value);
            const electronics = parseInt(document.getElementById('electronics').value);
            const recycling = document.querySelector('input[name="recycling"]:checked').value;
            
            // 计算碳排放 (简化的计算逻辑)
            let homeEnergy = electricity * 0.5 + gas * 2;
            let transportation = car * (isElectricVehicle ? 0.1 : 0.2) * 52 + flights * 0.2;
            
            let food = 0;
            switch(meatConsumption) {
                case 'daily':
                    food = 1800;
                    break;
                case 'weekly':
                    food = 1000;
                    break;
                case 'monthly':
                    food = 500;
                    break;
                case 'never':
                    food = 300;
                    break;
            }
            food = food * (1 - localFood/200); // 本地食品降低碳排放
            
            let consumption = newClothes * 10 + electronics * 100;
            switch(recycling) {
                case 'always':
                    consumption *= 0.7;
                    break;
                case 'sometimes':
                    consumption *= 0.85;
                    break;
                case 'never':
                    consumption *= 1;
                    break;
            }
            
            const totalEmission = (homeEnergy + transportation + food + consumption) / 1000; // 转为吨
            const percentageOfAverage = (totalEmission / 4.5 * 100).toFixed(0); // 假设中国人均为4.5吨
            const trees = Math.round(totalEmission * 50); // 每吨CO2约需50棵树
            const driving = Math.round(totalEmission * 5000); // 每吨CO2约等于5000公里驾驶
            const energy = Math.round(totalEmission * 2500); // 每吨CO2约等于2500千瓦时用电
            
            // 更新界面显示
            document.getElementById('total-emission-value').textContent = totalEmission.toFixed(2);
            document.getElementById('percentage-value').textContent = percentageOfAverage + '%';
            document.getElementById('trees-value').textContent = trees;
            document.getElementById('driving-value').textContent = driving;
            document.getElementById('energy-value').textContent = energy;
            
            // 生成减排建议
            const suggestionsList = document.getElementById('suggestions-list');
            suggestionsList.innerHTML = '';
            
            const suggestions = [];
            
            if (electricity > 300) {
                suggestions.push('考虑更换高能效电器，并在不使用时关闭电源，可减少约20%的家庭用电。');
            }
            
            if (gas > 50) {
                suggestions.push('改善家庭保温隔热条件，调整适宜的室内温度，可节约约30%的暖气用量。');
            }
            
            if (car > 150) {
                suggestions.push('尝试更多使用公共交通或自行车出行，每周减少50公里的驾车可节约约500kg的碳排放。');
            }
            
            if (flights > 10000) {
                suggestions.push('减少长途飞行，选择视频会议替代商务旅行，或选择碳中和航班。');
            }
            
            if (meatConsumption === 'daily') {
                suggestions.push('尝试每周安排1-2天的无肉日，可减少约300kg的年度碳排放。');
            }
            
            if (localFood < 50) {
                suggestions.push('增加本地食品的购买比例，支持当地农业，可减少食品运输产生的碳排放。');
            }
            
            if (recycling !== 'always') {
                suggestions.push('坚持垃圾分类和回收再利用，可减少约10%的消费相关碳排放。');
            }
            
            // 添加通用建议
            suggestions.push('参与碳中和项目或购买碳信用额，抵消您无法避免的碳排放。');
            suggestions.push('使用绿色能源，如安装太阳能板或选择可再生能源电力供应商。');
            
            // 更新到页面
            suggestions.forEach(suggestion => {
                const li = document.createElement('li');
                li.textContent = suggestion;
                suggestionsList.appendChild(li);
            });
            
            // 使用简单的HTML表格代替Chart.js图表
            const chartContainer = document.querySelector('.chart-container');
            chartContainer.innerHTML = '';
            
            // 创建排放源占比表格
            const total = homeEnergy + transportation + food + consumption;
            const homePercent = (homeEnergy / total * 100).toFixed(1);
            const transportPercent = (transportation / total * 100).toFixed(1);
            const foodPercent = (food / total * 100).toFixed(1);
            const consumptionPercent = (consumption / total * 100).toFixed(1);
            
            const table = document.createElement('table');
            table.style.width = '100%';
            table.style.borderCollapse = 'collapse';
            table.style.marginTop = '15px';
            
            const tableHTML = `
                <tr>
                    <th style="padding: 8px; text-align: left; border-bottom: 2px solid #ddd; color: #333;">排放源</th>
                    <th style="padding: 8px; text-align: right; border-bottom: 2px solid #ddd; color: #333;">占比</th>
                    <th style="padding: 8px; text-align: left; border-bottom: 2px solid #ddd; color: #333;">图示</th>
                </tr>
                <tr>
                    <td style="padding: 8px; text-align: left; border-bottom: 1px solid #ddd;">
                        <span style="display: inline-block; width: 12px; height: 12px; background-color: #4CAF50; margin-right: 8px;"></span>
                        家庭能源
                    </td>
                    <td style="padding: 8px; text-align: right; border-bottom: 1px solid #ddd;">${homePercent}%</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ddd;">
                        <div style="background-color: #4CAF50; height: 20px; width: ${homePercent}%;"></div>
                    </td>
                </tr>
                <tr>
                    <td style="padding: 8px; text-align: left; border-bottom: 1px solid #ddd;">
                        <span style="display: inline-block; width: 12px; height: 12px; background-color: #2196F3; margin-right: 8px;"></span>
                        交通出行
                    </td>
                    <td style="padding: 8px; text-align: right; border-bottom: 1px solid #ddd;">${transportPercent}%</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ddd;">
                        <div style="background-color: #2196F3; height: 20px; width: ${transportPercent}%;"></div>
                    </td>
                </tr>
                <tr>
                    <td style="padding: 8px; text-align: left; border-bottom: 1px solid #ddd;">
                        <span style="display: inline-block; width: 12px; height: 12px; background-color: #FFC107; margin-right: 8px;"></span>
                        饮食习惯
                    </td>
                    <td style="padding: 8px; text-align: right; border-bottom: 1px solid #ddd;">${foodPercent}%</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ddd;">
                        <div style="background-color: #FFC107; height: 20px; width: ${foodPercent}%;"></div>
                    </td>
                </tr>
                <tr>
                    <td style="padding: 8px; text-align: left; border-bottom: 1px solid #ddd;">
                        <span style="display: inline-block; width: 12px; height: 12px; background-color: #9C27B0; margin-right: 8px;"></span>
                        消费习惯
                    </td>
                    <td style="padding: 8px; text-align: right; border-bottom: 1px solid #ddd;">${consumptionPercent}%</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ddd;">
                        <div style="background-color: #9C27B0; height: 20px; width: ${consumptionPercent}%;"></div>
                    </td>
                </tr>
            `;
            
            table.innerHTML = tableHTML;
            chartContainer.appendChild(table);
            
            // 显示结果区域
            const resultsSection = document.getElementById('results-section');
            resultsSection.style.display = 'block';
            
            // 添加可见性类
            resultsSection.classList.add('visible');
            
            // 滚动到结果区域
            setTimeout(() => {
                resultsSection.scrollIntoView({behavior: 'smooth'});
            }, 100);
            
            // 更新进度指示器
            const stepItems = document.querySelectorAll('.step');
            
            // 重置所有步骤
            stepItems.forEach(step => step.classList.remove('active'));
            
            // 第一步：计算中
            stepItems[1].classList.add('active');
            
            // 模拟计算过程
            setTimeout(() => {
                stepItems[1].classList.remove('active');
                stepItems[2].classList.add('active'); // 查看结果
                
                setTimeout(() => {
                    stepItems[2].classList.remove('active');
                    stepItems[3].classList.add('active'); // 减排建议
                }, 1000);
            }, 1000);
            
            console.log("计算完成，总排放量：" + totalEmission.toFixed(2) + "吨CO₂");
            
            // 保存到历史记录
            saveCalculationHistory({
                date: new Date(),
                totalEmission: totalEmission,
                homeEnergy: homeEnergy,
                transportation: transportation,
                food: food,
                consumption: consumption,
                // 保存用户输入，以便恢复
                inputs: {
                    electricity: electricity,
                    gas: gas,
                    car: car,
                    publicTransport: publicTransport,
                    flights: flights,
                    meatConsumption: meatConsumption,
                    localFood: localFood,
                    wasteProduction: food,
                    recycling: recycling,
                    newItems: newClothes
                }
            });
            
            // 更新历史记录显示
            updateHistoryDisplay();
        });
        
        // 重置按钮点击事件
        document.getElementById('reset-btn').addEventListener('click', function() {
            document.querySelectorAll('.slider').forEach(slider => {
                slider.value = slider.defaultValue;
                const event = new Event('input');
                slider.dispatchEvent(event);
            });
            
            document.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
                checkbox.checked = false;
            });
            
            document.querySelectorAll('input[type="radio"]').forEach(radio => {
                if (radio.defaultChecked) {
                    radio.checked = true;
                } else {
                    radio.checked = false;
                }
            });
            
            document.getElementById('results-section').classList.remove('visible');
            document.getElementById('results-section').style.display = 'none';
            
            // 重置进度指示器
            const stepItems = document.querySelectorAll('.step');
            stepItems.forEach((step, index) => {
                if (index === 0) {
                    step.classList.add('active');
                } else {
                    step.classList.remove('active');
                }
            });
        });
        
        // 重新计算按钮点击事件
        document.getElementById('recalculate-btn').addEventListener('click', function() {
            document.getElementById('results-section').classList.remove('visible');
            document.getElementById('results-section').style.display = 'none';
            document.querySelector('.calculator-container').scrollIntoView({
                behavior: 'smooth'
            });
            
            // 重置进度指示器
            const stepItems = document.querySelectorAll('.step');
            stepItems.forEach((step, index) => {
                if (index === 0) {
                    step.classList.add('active');
                } else {
                    step.classList.remove('active');
                }
            });
        });
        
        // 页面加载时初始化
        document.addEventListener('DOMContentLoaded', function() {
            // 确保结果区域初始化为隐藏状态
            const resultsSection = document.getElementById('results-section');
            resultsSection.style.display = 'none';
            resultsSection.classList.remove('visible');
            
            // 初始化进度指示器
            const stepItems = document.querySelectorAll('.step');
            stepItems.forEach((step, index) => {
                if (index === 0) {
                    step.classList.add('active');
                } else {
                    step.classList.remove('active');
                }
            });
            
            // 初始化滑块值显示
            document.querySelectorAll('.slider').forEach(slider => {
                const valueDisplay = slider.nextElementSibling;
                let event = new Event('input');
                slider.dispatchEvent(event);
            });
            
            console.log("碳排放计算器已初始化完成");
            
            // 初始化历史记录功能
            initializeHistory();
        });

        // 初始化历史记录功能
        function initializeHistory() {
            // 从本地存储中加载历史记录
            updateHistoryDisplay();
            
            // 清空历史按钮事件
            document.getElementById('clear-history-btn').addEventListener('click', function() {
                if (confirm('确定要清空所有历史记录吗？')) {
                    localStorage.removeItem('carbonCalculatorHistory');
                    updateHistoryDisplay();
                }
            });
        }

        // 保存计算历史到localStorage
        function saveCalculationHistory(record) {
            let history = JSON.parse(localStorage.getItem('carbonCalculatorHistory') || '[]');
            
            // 限制历史记录数量，最多保存10条
            if (history.length >= 10) {
                history.pop(); // 移除最老的记录
            }
            
            // 添加新记录到开头
            history.unshift(record);
            
            // 保存回localStorage
            localStorage.setItem('carbonCalculatorHistory', JSON.stringify(history));
        }

        // 更新历史记录显示
        function updateHistoryDisplay() {
            const historyContainer = document.getElementById('history-records');
            const historyEmpty = document.getElementById('history-empty');
            const history = JSON.parse(localStorage.getItem('carbonCalculatorHistory') || '[]');
            
            // 清空当前显示
            historyContainer.innerHTML = '';
            
            if (history.length === 0) {
                // 显示空状态
                historyContainer.appendChild(historyEmpty);
                return;
            }
            
            // 添加历史记录
            history.forEach((record, index) => {
                const date = new Date(record.date);
                const formattedDate = `${date.getFullYear()}-${(date.getMonth()+1).toString().padStart(2, '0')}-${date.getDate().toString().padStart(2, '0')} ${date.getHours().toString().padStart(2, '0')}:${date.getMinutes().toString().padStart(2, '0')}`;
                
                // 确定最主要的排放源
                const sources = [
                    { name: '家庭能源', value: record.homeEnergy },
                    { name: '交通出行', value: record.transportation },
                    { name: '饮食习惯', value: record.food },
                    { name: '消费习惯', value: record.consumption }
                ];
                sources.sort((a, b) => b.value - a.value);
                const mainSource = sources[0].name;
                
                const recordElement = document.createElement('div');
                recordElement.className = 'history-record';
                recordElement.innerHTML = `
                    <div>
                        <span class="history-record-date">${formattedDate}</span>
                        <span class="history-record-emission">${record.totalEmission.toFixed(2)} 吨CO₂</span>
                        <span class="history-record-source">主要来源: ${mainSource}</span>
                    </div>
                    <div>
                        <span class="history-action view-history" data-index="${index}">查看详情</span>
                        <span class="history-action history-delete" data-index="${index}">删除</span>
                    </div>
                `;
                
                historyContainer.appendChild(recordElement);
            });
            
            // 添加查看详情事件
            document.querySelectorAll('.view-history').forEach(element => {
                element.addEventListener('click', function() {
                    const index = this.getAttribute('data-index');
                    restoreCalculation(history[index]);
                });
            });
            
            // 添加删除单条记录事件
            document.querySelectorAll('.history-delete').forEach(element => {
                element.addEventListener('click', function() {
                    const index = this.getAttribute('data-index');
                    if (confirm('确定要删除这条记录吗？')) {
                        history.splice(index, 1);
                        localStorage.setItem('carbonCalculatorHistory', JSON.stringify(history));
                        updateHistoryDisplay();
                    }
                });
            });
        }

        // 恢复历史计算结果
        function restoreCalculation(record) {
            // 恢复用户输入值
            if (record.inputs) {
                // 滑块
                document.getElementById('electricity-usage').value = record.inputs.electricity;
                document.getElementById('gas-usage').value = record.inputs.gas;
                document.getElementById('car-usage').value = record.inputs.car;
                document.getElementById('public-transport').value = record.inputs.publicTransport;
                document.getElementById('flight').value = record.inputs.flights;
                document.getElementById('local-food').value = record.inputs.localFood;
                document.getElementById('food-waste').value = record.inputs.wasteProduction;
                document.getElementById('new-clothes').value = record.inputs.newItems;
                
                // 触发滑块的input事件以更新显示值
                document.querySelectorAll('.slider').forEach(slider => {
                    const event = new Event('input');
                    slider.dispatchEvent(event);
                });
                
                // 单选按钮
                document.querySelectorAll('input[name="meat-consumption"]').forEach(radio => {
                    if (radio.value === record.inputs.meatConsumption) {
                        radio.checked = true;
                    }
                });
                
                document.querySelectorAll('input[name="recycling"]').forEach(radio => {
                    if (radio.value === record.inputs.recycling) {
                        radio.checked = true;
                    }
                });
            }
            
            // 手动触发计算按钮点击事件以重新计算并显示结果
            document.getElementById('calculate-btn').click();
            
            // 滚动到计算器顶部
            document.querySelector('.calculator-container').scrollIntoView({
                behavior: 'smooth'
            });
        }
    </script>
</body>
</html> 